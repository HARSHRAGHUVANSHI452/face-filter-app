<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script defer src="./face-api.min.js"></script>
  <script defer src="./script.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      /* width: 100vw; */
      /* height: 100vh; */
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
    }

    #output-canvas {
      position: relative;
    }

    canvas {
      position: absolute;
    }
  </style>
</head>

<body>
  <video id="video" width="720" height="560" autoplay muted></video>
  <canvas id="output-canvas" width="720" height="560"></canvas>
  <img hidden id="scream" src="./spiderman-mask-1.png" alt="The Scream" width="220" height="277">
  <img hidden id="scream1" src="./dog-ear-right.png" alt="The Scream" width="220" height="277">
  <img hidden id="scream2" src="./dog-ear-left.png" alt="The Scream" width="220" height="277">
  <img hidden id="scream3" src="./dog-nose.png" alt="The Scream" width="220" height="277">

</body>
<script>
//   let video1, video2, c1, ctx1, c_tmp, ctx_tmp;
//   function init() {
//     video1 = document.getElementById('video');

//     // video2 = document.createElement('video');
//     // video2.src = "fire.mp4"
//     video2 = document.getElementById('video');
//     video2.muted = true;
//     video2.autoplay = true;

//     c1 = document.getElementById('output-canvas');
//     ctx1 = c1.getContext('2d');

//     c_tmp = document.createElement('canvas');
//     c_tmp.setAttribute('width', 800);
//     c_tmp.setAttribute('height', 450);
//     ctx_tmp = c_tmp.getContext('2d');

//     video1.addEventListener('play', computeFrame);
//   }
//   function computeFrame() {

//     if (video1.paused || video1.ended) {
//       return;
//     }
//     ctx_tmp.drawImage(video1, 0, 0, video1.videoWidth, video1.videoHeight);
//     let frame = ctx_tmp.getImageData(0, 0, video1.videoWidth, video1.videoHeight);

//     ctx_tmp.drawImage(video2, 0, 0, video2.videoWidth, video2.videoHeight);
//     let frame2 = ctx_tmp.getImageData(0, 0, video2.videoWidth, video2.videoHeight);

//     for (let i = 0; i < frame.data.length / 4; i++) {
//       let r = frame.data[i * 4 + 0];
//       let g = frame.data[i * 4 + 1];
//       let b = frame.data[i * 4 + 2];

//       if (r > 70 && r < 160 && g > 95 && g < 220 && b > 25 && b < 150) {
//         frame.data[i * 4 + 0] = frame2.data[i * 4 + 0];
//         frame.data[i * 4 + 1] = frame2.data[i * 4 + 1];
//         frame.data[i * 4 + 2] = frame2.data[i * 4 + 2];
//       }
//     }
//     ctx1.putImageData(frame, 0, 0);
//     setTimeout(computeFrame, 0);
//   }

//   document.addEventListener("DOMContentLoaded", () => {
//     init();
//   });
// </script>

</html>